services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    #
    # INSTALLER
    #
    Pimcore\Bundle\StudioApiBundle\Installer:
        public: true
        arguments:
            $bundle: "@=service('kernel').getBundle('PimcoreStudioApiBundle')"

    # controllers are imported separately to make sure they're public
    # and have a tag that allows actions to type-hint services
    Pimcore\Bundle\StudioApiBundle\Controller\:
        resource: '../src/Controller'
        public: true
        tags: [ 'controller.service_arguments' ]

    # Providers
    Pimcore\Bundle\StudioApiBundle\State\AssetProvider: ~
    Pimcore\Bundle\StudioApiBundle\State\ScheduledTaskProvider: ~
    Pimcore\Bundle\StudioApiBundle\State\VersionProvider: ~

    # Processors
    Pimcore\Bundle\StudioApiBundle\State\ResetPasswordProcessor: ~

    # Filters
    Pimcore\Bundle\StudioApiBundle\Filter\AssetParentIdFilter:
        tags:  [ 'api_platform.filter' ]

    # Normalizers
    Pimcore\Bundle\StudioApiBundle\Serializer\AssetNormalizer:
        tags:
            - { name: 'serializer.normalizer' }
